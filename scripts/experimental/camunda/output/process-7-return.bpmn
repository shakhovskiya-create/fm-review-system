<?xml version="1.0" encoding="UTF-8"?>
<bpmn:definitions xmlns:bpmn="http://www.omg.org/spec/BPMN/20100524/MODEL" xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI" xmlns:dc="http://www.omg.org/spec/DD/20100524/DC" xmlns:di="http://www.omg.org/spec/DD/20100524/DI" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:zeebe="http://camunda.org/schema/zeebe/1.0" id="Definitions_1" targetNamespace="http://bpmn.io/schema/bpmn" exporter="fm-review-system" exporterVersion="2.0">
  <bpmn:process id="Process_vozvrat_tovara" name="Возврат товара" isExecutable="true">
    <bpmn:laneSet id="LaneSet_1">
      <bpmn:lane id="Lane_manager" name="Менеджер">
        <bpmn:flowNodeRef>start</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>t1</bpmn:flowNodeRef>
      </bpmn:lane>
      <bpmn:lane id="Lane_system" name="1С:УТ">
        <bpmn:flowNodeRef>x_ls</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>t2</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>t3</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>t4</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>x_level</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>t5</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>t6</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>x_60d</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>t7</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>t8</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>end_ok</bpmn:flowNodeRef>
      </bpmn:lane>
      <bpmn:lane id="Lane_exchange" name="Специалист товарообмена" />
    </bpmn:laneSet>
    <bpmn:startEvent id="start" name="">
      <bpmn:outgoing>Flow_start_t1</bpmn:outgoing>
    </bpmn:startEvent>
    <bpmn:task id="t1" name="Инициация возврата">
      <bpmn:incoming>Flow_start_t1</bpmn:incoming>
      <bpmn:outgoing>Flow_t1_x_ls</bpmn:outgoing>
    </bpmn:task>
    <bpmn:exclusiveGateway id="x_ls" name="X" default="Flow_x_ls_t6">
      <bpmn:incoming>Flow_t1_x_ls</bpmn:incoming>
      <bpmn:outgoing>Flow_x_ls_t2</bpmn:outgoing>
      <bpmn:outgoing>Flow_x_ls_t6</bpmn:outgoing>
    </bpmn:exclusiveGateway>
    <bpmn:task id="t2" name="Создание &#34;Возврат товаров&#34; (привязка к РТУ)">
      <bpmn:incoming>Flow_x_ls_t2</bpmn:incoming>
      <bpmn:outgoing>Flow_t2_t3</bpmn:outgoing>
    </bpmn:task>
    <bpmn:task id="t3" name="Товар в остаток ЛС (рент. по цене РТУ)">
      <bpmn:incoming>Flow_t2_t3</bpmn:incoming>
      <bpmn:outgoing>Flow_t3_t4</bpmn:outgoing>
    </bpmn:task>
    <bpmn:task id="t4" name="Пересчет накопленной рентабельности">
      <bpmn:incoming>Flow_t3_t4</bpmn:incoming>
      <bpmn:outgoing>Flow_t4_x_level</bpmn:outgoing>
    </bpmn:task>
    <bpmn:exclusiveGateway id="x_level" name="X" default="Flow_x_level_end_ok">
      <bpmn:incoming>Flow_t4_x_level</bpmn:incoming>
      <bpmn:outgoing>Flow_x_level_t5</bpmn:outgoing>
      <bpmn:outgoing>Flow_x_level_end_ok</bpmn:outgoing>
    </bpmn:exclusiveGateway>
    <bpmn:task id="t5" name="Аннулирование согласований">
      <bpmn:incoming>Flow_x_level_t5</bpmn:incoming>
      <bpmn:outgoing>Flow_t5_end_ok</bpmn:outgoing>
    </bpmn:task>
    <bpmn:task id="t6" name="Возврат по закрытой ЛС (товар в своб. остаток)">
      <bpmn:incoming>Flow_x_ls_t6</bpmn:incoming>
      <bpmn:outgoing>Flow_t6_x_60d</bpmn:outgoing>
    </bpmn:task>
    <bpmn:exclusiveGateway id="x_60d" name="X" default="Flow_x_60d_t8">
      <bpmn:incoming>Flow_t6_x_60d</bpmn:incoming>
      <bpmn:outgoing>Flow_x_60d_t7</bpmn:outgoing>
      <bpmn:outgoing>Flow_x_60d_t8</bpmn:outgoing>
    </bpmn:exclusiveGateway>
    <bpmn:task id="t7" name="Учет в санкциях (% выкупа)">
      <bpmn:incoming>Flow_x_60d_t7</bpmn:incoming>
      <bpmn:outgoing>Flow_t7_end_ok</bpmn:outgoing>
    </bpmn:task>
    <bpmn:task id="t8" name="Только финансовая корректировка">
      <bpmn:incoming>Flow_x_60d_t8</bpmn:incoming>
      <bpmn:outgoing>Flow_t8_end_ok</bpmn:outgoing>
    </bpmn:task>
    <bpmn:endEvent id="end_ok" name="Возврат обработан">
      <bpmn:incoming>Flow_x_level_end_ok</bpmn:incoming>
      <bpmn:incoming>Flow_t5_end_ok</bpmn:incoming>
      <bpmn:incoming>Flow_t7_end_ok</bpmn:incoming>
      <bpmn:incoming>Flow_t8_end_ok</bpmn:incoming>
    </bpmn:endEvent>
    <bpmn:sequenceFlow id="Flow_start_t1" sourceRef="start" targetRef="t1" />
    <bpmn:sequenceFlow id="Flow_t1_x_ls" sourceRef="t1" targetRef="x_ls" />
    <bpmn:sequenceFlow id="Flow_x_ls_t2" name="ЛС активна" sourceRef="x_ls" targetRef="t2">
      <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">=condition = "ЛС активна"</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    <bpmn:sequenceFlow id="Flow_x_ls_t6" name="ЛС закрыта" sourceRef="x_ls" targetRef="t6" />
    <bpmn:sequenceFlow id="Flow_t2_t3" sourceRef="t2" targetRef="t3" />
    <bpmn:sequenceFlow id="Flow_t3_t4" sourceRef="t3" targetRef="t4" />
    <bpmn:sequenceFlow id="Flow_t4_x_level" sourceRef="t4" targetRef="x_level" />
    <bpmn:sequenceFlow id="Flow_x_level_t5" name="уровень&#10;изменился" sourceRef="x_level" targetRef="t5">
      <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">=condition = "уровень
изменился"</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    <bpmn:sequenceFlow id="Flow_x_level_end_ok" name="без изменений" sourceRef="x_level" targetRef="end_ok" />
    <bpmn:sequenceFlow id="Flow_t5_end_ok" sourceRef="t5" targetRef="end_ok" />
    <bpmn:sequenceFlow id="Flow_t6_x_60d" sourceRef="t6" targetRef="x_60d" />
    <bpmn:sequenceFlow id="Flow_x_60d_t7" name="&#60;= 60 дней" sourceRef="x_60d" targetRef="t7">
      <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">=condition = "&lt;= 60 дней"</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    <bpmn:sequenceFlow id="Flow_x_60d_t8" name="&#62; 60 дней" sourceRef="x_60d" targetRef="t8" />
    <bpmn:sequenceFlow id="Flow_t7_end_ok" sourceRef="t7" targetRef="end_ok" />
    <bpmn:sequenceFlow id="Flow_t8_end_ok" sourceRef="t8" targetRef="end_ok" />
  </bpmn:process>
  <bpmndi:BPMNDiagram id="BPMNDiagram_Process_vozvrat_tovara">
    <bpmndi:BPMNPlane id="BPMNPlane_Process_vozvrat_tovara" bpmnElement="Process_vozvrat_tovara">
      <bpmndi:BPMNShape id="start_di" bpmnElement="start">
        <dc:Bounds x="57" y="52" width="36" height="36" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="t1_di" bpmnElement="t1">
        <dc:Bounds x="175" y="30" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="x_ls_di" bpmnElement="x_ls" isMarkerVisible="true">
        <dc:Bounds x="350" y="45" width="50" height="50" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="t2_di" bpmnElement="t2">
        <dc:Bounds x="475" y="30" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="t3_di" bpmnElement="t3">
        <dc:Bounds x="625" y="30" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="t4_di" bpmnElement="t4">
        <dc:Bounds x="775" y="30" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="x_level_di" bpmnElement="x_level" isMarkerVisible="true">
        <dc:Bounds x="950" y="45" width="50" height="50" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="t5_di" bpmnElement="t5">
        <dc:Bounds x="1075" y="30" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="end_ok_di" bpmnElement="end_ok">
        <dc:Bounds x="1557" y="52" width="36" height="36" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="t6_di" bpmnElement="t6">
        <dc:Bounds x="475" y="170" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="x_60d_di" bpmnElement="x_60d" isMarkerVisible="true">
        <dc:Bounds x="1250" y="185" width="50" height="50" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="t7_di" bpmnElement="t7">
        <dc:Bounds x="1375" y="170" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="t8_di" bpmnElement="t8">
        <dc:Bounds x="1375" y="310" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="Flow_start_t1_di" bpmnElement="Flow_start_t1">
        <di:waypoint x="93" y="70" />
        <di:waypoint x="175" y="70" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_t1_x_ls_di" bpmnElement="Flow_t1_x_ls">
        <di:waypoint x="275" y="70" />
        <di:waypoint x="350" y="70" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_x_ls_t2_di" bpmnElement="Flow_x_ls_t2">
        <di:waypoint x="400" y="70" />
        <di:waypoint x="475" y="70" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_x_ls_t6_di" bpmnElement="Flow_x_ls_t6">
        <di:waypoint x="375" y="95" />
        <di:waypoint x="375" y="210" />
        <di:waypoint x="475" y="210" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_t2_t3_di" bpmnElement="Flow_t2_t3">
        <di:waypoint x="575" y="70" />
        <di:waypoint x="625" y="70" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_t3_t4_di" bpmnElement="Flow_t3_t4">
        <di:waypoint x="725" y="70" />
        <di:waypoint x="775" y="70" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_t4_x_level_di" bpmnElement="Flow_t4_x_level">
        <di:waypoint x="875" y="70" />
        <di:waypoint x="950" y="70" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_x_level_t5_di" bpmnElement="Flow_x_level_t5">
        <di:waypoint x="1000" y="70" />
        <di:waypoint x="1075" y="70" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_x_level_end_ok_di" bpmnElement="Flow_x_level_end_ok">
        <di:waypoint x="975" y="95" />
        <di:waypoint x="975" y="140" />
        <di:waypoint x="1575" y="140" />
        <di:waypoint x="1575" y="88" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_t5_end_ok_di" bpmnElement="Flow_t5_end_ok">
        <di:waypoint x="1175" y="70" />
        <di:waypoint x="1557" y="70" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_t6_x_60d_di" bpmnElement="Flow_t6_x_60d">
        <di:waypoint x="575" y="210" />
        <di:waypoint x="1250" y="210" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_x_60d_t7_di" bpmnElement="Flow_x_60d_t7">
        <di:waypoint x="1300" y="210" />
        <di:waypoint x="1375" y="210" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_x_60d_t8_di" bpmnElement="Flow_x_60d_t8">
        <di:waypoint x="1275" y="235" />
        <di:waypoint x="1275" y="350" />
        <di:waypoint x="1375" y="350" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_t7_end_ok_di" bpmnElement="Flow_t7_end_ok">
        <di:waypoint x="1475" y="210" />
        <di:waypoint x="1575" y="210" />
        <di:waypoint x="1575" y="88" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_t8_end_ok_di" bpmnElement="Flow_t8_end_ok">
        <di:waypoint x="1475" y="350" />
        <di:waypoint x="1575" y="350" />
        <di:waypoint x="1575" y="88" />
      </bpmndi:BPMNEdge>
    </bpmndi:BPMNPlane>
  </bpmndi:BPMNDiagram>
</bpmn:definitions>
