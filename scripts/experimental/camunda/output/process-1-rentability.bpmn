<?xml version="1.0" encoding="UTF-8"?>
<bpmn:definitions xmlns:bpmn="http://www.omg.org/spec/BPMN/20100524/MODEL" xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI" xmlns:dc="http://www.omg.org/spec/DD/20100524/DC" xmlns:di="http://www.omg.org/spec/DD/20100524/DI" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:zeebe="http://camunda.org/schema/zeebe/1.0" id="Definitions_1" targetNamespace="http://bpmn.io/schema/bpmn" exporter="fm-review-system" exporterVersion="2.0">
  <bpmn:error id="Error_e1" name="Заблокирован" errorCode="E1" />
  <bpmn:error id="Error_e4" name="Отклонено" errorCode="E4" />
  <bpmn:process id="Process_kontrol_rentabel_nosti" name="Контроль рентабельности" isExecutable="true">
    <bpmn:laneSet id="LaneSet_1">
      <bpmn:lane id="Lane_manager" name="Менеджер">
        <bpmn:flowNodeRef>start</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>t1</bpmn:flowNodeRef>
      </bpmn:lane>
      <bpmn:lane id="Lane_system" name="Контроль рентабельности 1С:УТ">
        <bpmn:flowNodeRef>t2</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>x1</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>t3</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>e1</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>t4</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>x2</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>t5</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>e2</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>t6</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>x3</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>e3</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>e4</bpmn:flowNodeRef>
      </bpmn:lane>
    </bpmn:laneSet>
    <bpmn:startEvent id="start" name="">
      <bpmn:outgoing>Flow_start_t1</bpmn:outgoing>
    </bpmn:startEvent>
    <bpmn:task id="t1" name="Создать Заказ клиента">
      <bpmn:incoming>Flow_start_t1</bpmn:incoming>
      <bpmn:outgoing>Flow_t1_t2</bpmn:outgoing>
    </bpmn:task>
    <bpmn:task id="t2" name="Проверка НПСС (возраст &#60; 90 дн)">
      <bpmn:incoming>Flow_t1_t2</bpmn:incoming>
      <bpmn:outgoing>Flow_t2_x1</bpmn:outgoing>
    </bpmn:task>
    <bpmn:exclusiveGateway id="x1" name="X" default="Flow_x1_t4">
      <bpmn:incoming>Flow_t2_x1</bpmn:incoming>
      <bpmn:outgoing>Flow_x1_t3</bpmn:outgoing>
      <bpmn:outgoing>Flow_x1_t4</bpmn:outgoing>
    </bpmn:exclusiveGateway>
    <bpmn:task id="t3" name="Блокировка (обновить НПСС)">
      <bpmn:incoming>Flow_x1_t3</bpmn:incoming>
      <bpmn:outgoing>Flow_t3_e1</bpmn:outgoing>
    </bpmn:task>
    <bpmn:endEvent id="e1" name="Заблокирован">
      <bpmn:incoming>Flow_t3_e1</bpmn:incoming>
      <bpmn:errorEventDefinition id="ErrorDef_e1" errorRef="Error_e1" />
    </bpmn:endEvent>
    <bpmn:task id="t4" name="Расчет рентабельности">
      <bpmn:incoming>Flow_x1_t4</bpmn:incoming>
      <bpmn:outgoing>Flow_t4_x2</bpmn:outgoing>
    </bpmn:task>
    <bpmn:exclusiveGateway id="x2" name="X" default="Flow_x2_t6">
      <bpmn:incoming>Flow_t4_x2</bpmn:incoming>
      <bpmn:outgoing>Flow_x2_t5</bpmn:outgoing>
      <bpmn:outgoing>Flow_x2_t6</bpmn:outgoing>
    </bpmn:exclusiveGateway>
    <bpmn:task id="t5" name="Авто- согласование">
      <bpmn:incoming>Flow_x2_t5</bpmn:incoming>
      <bpmn:outgoing>Flow_t5_e2</bpmn:outgoing>
    </bpmn:task>
    <bpmn:endEvent id="e2" name="Заказ согласован">
      <bpmn:incoming>Flow_t5_e2</bpmn:incoming>
    </bpmn:endEvent>
    <bpmn:callActivity id="t6" name="Согласование (см. BPMN 2)">
      <bpmn:extensionElements>
        <zeebe:calledElement processId="Process_soglasovanie_sm_bpmn_2" propagateAllChildVariables="false" />
      </bpmn:extensionElements>
      <bpmn:incoming>Flow_x2_t6</bpmn:incoming>
      <bpmn:outgoing>Flow_t6_x3</bpmn:outgoing>
    </bpmn:callActivity>
    <bpmn:exclusiveGateway id="x3" name="X" default="Flow_x3_e4">
      <bpmn:incoming>Flow_t6_x3</bpmn:incoming>
      <bpmn:outgoing>Flow_x3_e3</bpmn:outgoing>
      <bpmn:outgoing>Flow_x3_e4</bpmn:outgoing>
    </bpmn:exclusiveGateway>
    <bpmn:endEvent id="e3" name="Согласовано">
      <bpmn:incoming>Flow_x3_e3</bpmn:incoming>
    </bpmn:endEvent>
    <bpmn:endEvent id="e4" name="Отклонено">
      <bpmn:incoming>Flow_x3_e4</bpmn:incoming>
      <bpmn:errorEventDefinition id="ErrorDef_e4" errorRef="Error_e4" />
    </bpmn:endEvent>
    <bpmn:sequenceFlow id="Flow_start_t1" sourceRef="start" targetRef="t1" />
    <bpmn:sequenceFlow id="Flow_t1_t2" sourceRef="t1" targetRef="t2" />
    <bpmn:sequenceFlow id="Flow_t2_x1" sourceRef="t2" targetRef="x1" />
    <bpmn:sequenceFlow id="Flow_x1_t3" name="устарела" sourceRef="x1" targetRef="t3">
      <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">=condition = "устарела"</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    <bpmn:sequenceFlow id="Flow_t3_e1" sourceRef="t3" targetRef="e1" />
    <bpmn:sequenceFlow id="Flow_x1_t4" name="актуальна" sourceRef="x1" targetRef="t4" />
    <bpmn:sequenceFlow id="Flow_t4_x2" sourceRef="t4" targetRef="x2" />
    <bpmn:sequenceFlow id="Flow_x2_t5" name="&#62;= 0%" sourceRef="x2" targetRef="t5">
      <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">=condition = "&gt;= 0%"</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    <bpmn:sequenceFlow id="Flow_t5_e2" sourceRef="t5" targetRef="e2" />
    <bpmn:sequenceFlow id="Flow_x2_t6" name="&#60; 0%" sourceRef="x2" targetRef="t6" />
    <bpmn:sequenceFlow id="Flow_t6_x3" sourceRef="t6" targetRef="x3" />
    <bpmn:sequenceFlow id="Flow_x3_e3" name="да" sourceRef="x3" targetRef="e3">
      <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">=condition = "да"</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    <bpmn:sequenceFlow id="Flow_x3_e4" name="нет" sourceRef="x3" targetRef="e4" />
  </bpmn:process>
  <bpmndi:BPMNDiagram id="BPMNDiagram_Process_kontrol_rentabel_nosti">
    <bpmndi:BPMNPlane id="BPMNPlane_Process_kontrol_rentabel_nosti" bpmnElement="Process_kontrol_rentabel_nosti">
      <bpmndi:BPMNShape id="start_di" bpmnElement="start">
        <dc:Bounds x="57" y="52" width="36" height="36" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="t1_di" bpmnElement="t1">
        <dc:Bounds x="175" y="30" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="t2_di" bpmnElement="t2">
        <dc:Bounds x="325" y="30" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="x1_di" bpmnElement="x1" isMarkerVisible="true">
        <dc:Bounds x="500" y="45" width="50" height="50" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="t3_di" bpmnElement="t3">
        <dc:Bounds x="625" y="30" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="e1_di" bpmnElement="e1">
        <dc:Bounds x="807" y="52" width="36" height="36" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="t4_di" bpmnElement="t4">
        <dc:Bounds x="625" y="170" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="x2_di" bpmnElement="x2" isMarkerVisible="true">
        <dc:Bounds x="800" y="185" width="50" height="50" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="t5_di" bpmnElement="t5">
        <dc:Bounds x="925" y="170" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="e2_di" bpmnElement="e2">
        <dc:Bounds x="1107" y="192" width="36" height="36" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="t6_di" bpmnElement="t6">
        <dc:Bounds x="925" y="310" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="x3_di" bpmnElement="x3" isMarkerVisible="true">
        <dc:Bounds x="1100" y="325" width="50" height="50" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="e3_di" bpmnElement="e3">
        <dc:Bounds x="1257" y="332" width="36" height="36" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="e4_di" bpmnElement="e4">
        <dc:Bounds x="1257" y="472" width="36" height="36" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="Flow_start_t1_di" bpmnElement="Flow_start_t1">
        <di:waypoint x="93" y="70" />
        <di:waypoint x="175" y="70" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_t1_t2_di" bpmnElement="Flow_t1_t2">
        <di:waypoint x="275" y="70" />
        <di:waypoint x="325" y="70" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_t2_x1_di" bpmnElement="Flow_t2_x1">
        <di:waypoint x="425" y="70" />
        <di:waypoint x="500" y="70" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_x1_t3_di" bpmnElement="Flow_x1_t3">
        <di:waypoint x="550" y="70" />
        <di:waypoint x="625" y="70" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_x1_t4_di" bpmnElement="Flow_x1_t4">
        <di:waypoint x="525" y="95" />
        <di:waypoint x="525" y="210" />
        <di:waypoint x="625" y="210" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_t3_e1_di" bpmnElement="Flow_t3_e1">
        <di:waypoint x="725" y="70" />
        <di:waypoint x="807" y="70" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_t4_x2_di" bpmnElement="Flow_t4_x2">
        <di:waypoint x="725" y="210" />
        <di:waypoint x="800" y="210" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_x2_t5_di" bpmnElement="Flow_x2_t5">
        <di:waypoint x="850" y="210" />
        <di:waypoint x="925" y="210" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_x2_t6_di" bpmnElement="Flow_x2_t6">
        <di:waypoint x="825" y="235" />
        <di:waypoint x="825" y="350" />
        <di:waypoint x="925" y="350" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_t5_e2_di" bpmnElement="Flow_t5_e2">
        <di:waypoint x="1025" y="210" />
        <di:waypoint x="1107" y="210" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_t6_x3_di" bpmnElement="Flow_t6_x3">
        <di:waypoint x="1025" y="350" />
        <di:waypoint x="1100" y="350" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_x3_e3_di" bpmnElement="Flow_x3_e3">
        <di:waypoint x="1150" y="350" />
        <di:waypoint x="1257" y="350" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_x3_e4_di" bpmnElement="Flow_x3_e4">
        <di:waypoint x="1125" y="375" />
        <di:waypoint x="1125" y="490" />
        <di:waypoint x="1257" y="490" />
      </bpmndi:BPMNEdge>
    </bpmndi:BPMNPlane>
  </bpmndi:BPMNDiagram>
</bpmn:definitions>
