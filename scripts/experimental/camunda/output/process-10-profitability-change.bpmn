<?xml version="1.0" encoding="UTF-8"?>
<bpmn:definitions xmlns:bpmn="http://www.omg.org/spec/BPMN/20100524/MODEL"
                  xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI"
                  xmlns:dc="http://www.omg.org/spec/DD/20100524/DC"
                  xmlns:di="http://www.omg.org/spec/DD/20100524/DI"
                  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
                  xmlns:zeebe="http://camunda.org/schema/zeebe/1.0"
                  id="Definitions_1"
                  targetNamespace="http://bpmn.io/schema/bpmn"
                  exporter="fm-review-system"
                  exporterVersion="1.0">
  <bpmn:error id="Error_end_reject" name="Отклонено" errorCode="END_REJECT" />
  <bpmn:collaboration id="Collaboration_1">
    <bpmn:participant id="Participant_1" name="Изменение плановой рентабельности ЛС" processRef="Process_izmenenie_planovoj_rentabel_nosti_ls" />
  </bpmn:collaboration>
  <bpmn:process id="Process_izmenenie_planovoj_rentabel_nosti_ls" name="Изменение плановой рентабельности ЛС" isExecutable="true">
    <bpmn:laneSet id="LaneSet_1">
      <bpmn:lane id="Lane_manager" name="Менеджер">
        <bpmn:flowNodeRef>start</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>t1</bpmn:flowNodeRef>
      </bpmn:lane>
      <bpmn:lane id="Lane_system" name="1С:УТ">
        <bpmn:flowNodeRef>x_direction</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>t_increase</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>x_cause</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>t_npss</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>x_level</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>t_apply</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>t_annul</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>t_reject</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>end_ok</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>end_reject</bpmn:flowNodeRef>
      </bpmn:lane>
      <bpmn:lane id="Lane_approver" name="Согласующий (РБЮ / ДП / ГД)">
        <bpmn:flowNodeRef>t_rbu</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>t_dp</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>t_gd</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>x_result</bpmn:flowNodeRef>
      </bpmn:lane>
    </bpmn:laneSet>
    <bpmn:startEvent id="start" name="">
      <bpmn:outgoing>Flow_start_t1</bpmn:outgoing>
    </bpmn:startEvent>
    <bpmn:task id="t1" name="Запрос на изменение плановой рентабельности">
      <bpmn:incoming>Flow_start_t1</bpmn:incoming>
      <bpmn:outgoing>Flow_t1_x_direction</bpmn:outgoing>
    </bpmn:task>
    <bpmn:exclusiveGateway id="x_direction" name="X" default="Flow_x_direction_x_cause">
      <bpmn:incoming>Flow_t1_x_direction</bpmn:incoming>
      <bpmn:outgoing>Flow_x_direction_t_increase</bpmn:outgoing>
      <bpmn:outgoing>Flow_x_direction_x_cause</bpmn:outgoing>
    </bpmn:exclusiveGateway>
    <bpmn:task id="t_increase" name="Повышение (без согласования)">
      <bpmn:incoming>Flow_x_direction_t_increase</bpmn:incoming>
      <bpmn:outgoing>Flow_t_increase_t_apply</bpmn:outgoing>
    </bpmn:task>
    <bpmn:exclusiveGateway id="x_cause" name="X" default="Flow_x_cause_x_level">
      <bpmn:incoming>Flow_x_direction_x_cause</bpmn:incoming>
      <bpmn:outgoing>Flow_x_cause_t_npss</bpmn:outgoing>
      <bpmn:outgoing>Flow_x_cause_x_level</bpmn:outgoing>
    </bpmn:exclusiveGateway>
    <bpmn:task id="t_npss" name="Снижение из-за пересчета НПСС (без согласования)">
      <bpmn:incoming>Flow_x_cause_t_npss</bpmn:incoming>
      <bpmn:outgoing>Flow_t_npss_t_apply</bpmn:outgoing>
    </bpmn:task>
    <bpmn:exclusiveGateway id="x_level" name="X" default="Flow_x_level_t_gd">
      <bpmn:incoming>Flow_x_cause_x_level</bpmn:incoming>
      <bpmn:outgoing>Flow_x_level_t_rbu</bpmn:outgoing>
      <bpmn:outgoing>Flow_x_level_t_dp</bpmn:outgoing>
      <bpmn:outgoing>Flow_x_level_t_gd</bpmn:outgoing>
    </bpmn:exclusiveGateway>
    <bpmn:task id="t_rbu" name="Согласование РБЮ (0-3 п.п.)">
      <bpmn:incoming>Flow_x_level_t_rbu</bpmn:incoming>
      <bpmn:outgoing>Flow_t_rbu_x_result</bpmn:outgoing>
    </bpmn:task>
    <bpmn:task id="t_dp" name="Согласование ДП (3.01-10 п.п.)">
      <bpmn:incoming>Flow_x_level_t_dp</bpmn:incoming>
      <bpmn:outgoing>Flow_t_dp_x_result</bpmn:outgoing>
    </bpmn:task>
    <bpmn:task id="t_gd" name="Согласование ГД (&gt; 10 п.п.)">
      <bpmn:incoming>Flow_x_level_t_gd</bpmn:incoming>
      <bpmn:outgoing>Flow_t_gd_x_result</bpmn:outgoing>
    </bpmn:task>
    <bpmn:exclusiveGateway id="x_result" name="X" default="Flow_x_result_t_reject">
      <bpmn:incoming>Flow_t_rbu_x_result</bpmn:incoming>
      <bpmn:incoming>Flow_t_dp_x_result</bpmn:incoming>
      <bpmn:incoming>Flow_t_gd_x_result</bpmn:incoming>
      <bpmn:outgoing>Flow_x_result_t_apply</bpmn:outgoing>
      <bpmn:outgoing>Flow_x_result_t_reject</bpmn:outgoing>
    </bpmn:exclusiveGateway>
    <bpmn:task id="t_apply" name="Применение изменения (запись в журнал)">
      <bpmn:incoming>Flow_x_result_t_apply</bpmn:incoming>
      <bpmn:incoming>Flow_t_increase_t_apply</bpmn:incoming>
      <bpmn:incoming>Flow_t_npss_t_apply</bpmn:incoming>
      <bpmn:outgoing>Flow_t_apply_t_annul</bpmn:outgoing>
    </bpmn:task>
    <bpmn:task id="t_annul" name="Аннулирование согласований (если уровень изменился)">
      <bpmn:incoming>Flow_t_apply_t_annul</bpmn:incoming>
      <bpmn:outgoing>Flow_t_annul_end_ok</bpmn:outgoing>
    </bpmn:task>
    <bpmn:task id="t_reject" name="Отказ (изменение не применено)">
      <bpmn:incoming>Flow_x_result_t_reject</bpmn:incoming>
      <bpmn:outgoing>Flow_t_reject_end_reject</bpmn:outgoing>
    </bpmn:task>
    <bpmn:endEvent id="end_ok" name="Изменено">
      <bpmn:incoming>Flow_t_annul_end_ok</bpmn:incoming>
    </bpmn:endEvent>
    <bpmn:endEvent id="end_reject" name="Отклонено">
      <bpmn:incoming>Flow_t_reject_end_reject</bpmn:incoming>
      <bpmn:errorEventDefinition id="ErrorDef_end_reject" errorRef="Error_end_reject" />
    </bpmn:endEvent>
    <bpmn:sequenceFlow id="Flow_start_t1" sourceRef="start" targetRef="t1" />
    <bpmn:sequenceFlow id="Flow_t1_x_direction" sourceRef="t1" targetRef="x_direction" />
    <bpmn:sequenceFlow id="Flow_x_direction_t_increase" name="повышение" sourceRef="x_direction" targetRef="t_increase">
      <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">=повышение</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    <bpmn:sequenceFlow id="Flow_x_direction_x_cause" name="снижение" sourceRef="x_direction" targetRef="x_cause" />
    <bpmn:sequenceFlow id="Flow_x_cause_t_npss" name="пересчет НПСС" sourceRef="x_cause" targetRef="t_npss">
      <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">=пересчет НПСС</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    <bpmn:sequenceFlow id="Flow_x_cause_x_level" name="ручной запрос" sourceRef="x_cause" targetRef="x_level" />
    <bpmn:sequenceFlow id="Flow_x_level_t_rbu" name="0-3 п.п." sourceRef="x_level" targetRef="t_rbu">
      <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">=0-3 п.п.</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    <bpmn:sequenceFlow id="Flow_x_level_t_dp" name="3.01-10" sourceRef="x_level" targetRef="t_dp">
      <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">=3.01-10</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    <bpmn:sequenceFlow id="Flow_x_level_t_gd" name="&gt; 10 п.п." sourceRef="x_level" targetRef="t_gd" />
    <bpmn:sequenceFlow id="Flow_t_rbu_x_result" sourceRef="t_rbu" targetRef="x_result" />
    <bpmn:sequenceFlow id="Flow_t_dp_x_result" sourceRef="t_dp" targetRef="x_result" />
    <bpmn:sequenceFlow id="Flow_t_gd_x_result" sourceRef="t_gd" targetRef="x_result" />
    <bpmn:sequenceFlow id="Flow_x_result_t_apply" name="одобрено" sourceRef="x_result" targetRef="t_apply">
      <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">=одобрено</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    <bpmn:sequenceFlow id="Flow_x_result_t_reject" name="отклонено" sourceRef="x_result" targetRef="t_reject" />
    <bpmn:sequenceFlow id="Flow_t_increase_t_apply" sourceRef="t_increase" targetRef="t_apply" />
    <bpmn:sequenceFlow id="Flow_t_npss_t_apply" sourceRef="t_npss" targetRef="t_apply" />
    <bpmn:sequenceFlow id="Flow_t_apply_t_annul" sourceRef="t_apply" targetRef="t_annul" />
    <bpmn:sequenceFlow id="Flow_t_annul_end_ok" sourceRef="t_annul" targetRef="end_ok" />
    <bpmn:sequenceFlow id="Flow_t_reject_end_reject" sourceRef="t_reject" targetRef="end_reject" />
  </bpmn:process>
  <bpmndi:BPMNDiagram id="BPMNDiagram_1">
    <bpmndi:BPMNPlane id="BPMNPlane_1" bpmnElement="Collaboration_1">
      <bpmndi:BPMNShape id="Participant_1_di" bpmnElement="Participant_1" isHorizontal="true">
        <dc:Bounds x="100" y="60" width="2180" height="840" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Lane_manager_di" bpmnElement="Lane_manager" isHorizontal="true">
        <dc:Bounds x="130" y="60" width="2150" height="160" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Lane_system_di" bpmnElement="Lane_system" isHorizontal="true">
        <dc:Bounds x="130" y="220" width="2150" height="280" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Lane_approver_di" bpmnElement="Lane_approver" isHorizontal="true">
        <dc:Bounds x="130" y="500" width="2150" height="400" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="start_di" bpmnElement="start">
        <dc:Bounds x="200" y="100" width="36" height="36" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="t1_di" bpmnElement="t1">
        <dc:Bounds x="380" y="100" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="x_direction_di" bpmnElement="x_direction">
        <dc:Bounds x="560" y="320" width="50" height="50" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="t_increase_di" bpmnElement="t_increase">
        <dc:Bounds x="740" y="260" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="x_cause_di" bpmnElement="x_cause">
        <dc:Bounds x="740" y="380" width="50" height="50" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="t_npss_di" bpmnElement="t_npss">
        <dc:Bounds x="920" y="260" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="x_level_di" bpmnElement="x_level">
        <dc:Bounds x="920" y="380" width="50" height="50" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="t_rbu_di" bpmnElement="t_rbu">
        <dc:Bounds x="1100" y="540" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="t_dp_di" bpmnElement="t_dp">
        <dc:Bounds x="1100" y="660" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="t_gd_di" bpmnElement="t_gd">
        <dc:Bounds x="1100" y="780" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="x_result_di" bpmnElement="x_result">
        <dc:Bounds x="1280" y="660" width="50" height="50" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="t_apply_di" bpmnElement="t_apply">
        <dc:Bounds x="1460" y="260" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="t_annul_di" bpmnElement="t_annul">
        <dc:Bounds x="1640" y="260" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="t_reject_di" bpmnElement="t_reject">
        <dc:Bounds x="1460" y="380" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="end_ok_di" bpmnElement="end_ok">
        <dc:Bounds x="1820" y="320" width="36" height="36" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="end_reject_di" bpmnElement="end_reject">
        <dc:Bounds x="1640" y="380" width="36" height="36" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="Flow_start_t1_di" bpmnElement="Flow_start_t1">
        <di:waypoint x="236" y="118" />
        <di:waypoint x="308" y="118" />
        <di:waypoint x="308" y="140" />
        <di:waypoint x="380" y="140" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_t1_x_direction_di" bpmnElement="Flow_t1_x_direction">
        <di:waypoint x="480" y="140" />
        <di:waypoint x="520" y="140" />
        <di:waypoint x="520" y="345" />
        <di:waypoint x="560" y="345" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_x_direction_t_increase_di" bpmnElement="Flow_x_direction_t_increase">
        <di:waypoint x="610" y="345" />
        <di:waypoint x="675" y="345" />
        <di:waypoint x="675" y="300" />
        <di:waypoint x="740" y="300" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_x_direction_x_cause_di" bpmnElement="Flow_x_direction_x_cause">
        <di:waypoint x="610" y="345" />
        <di:waypoint x="675" y="345" />
        <di:waypoint x="675" y="405" />
        <di:waypoint x="740" y="405" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_x_cause_t_npss_di" bpmnElement="Flow_x_cause_t_npss">
        <di:waypoint x="790" y="405" />
        <di:waypoint x="855" y="405" />
        <di:waypoint x="855" y="300" />
        <di:waypoint x="920" y="300" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_x_cause_x_level_di" bpmnElement="Flow_x_cause_x_level">
        <di:waypoint x="790" y="405" />
        <di:waypoint x="920" y="405" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_x_level_t_rbu_di" bpmnElement="Flow_x_level_t_rbu">
        <di:waypoint x="970" y="405" />
        <di:waypoint x="1035" y="405" />
        <di:waypoint x="1035" y="580" />
        <di:waypoint x="1100" y="580" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_x_level_t_dp_di" bpmnElement="Flow_x_level_t_dp">
        <di:waypoint x="970" y="405" />
        <di:waypoint x="1035" y="405" />
        <di:waypoint x="1035" y="700" />
        <di:waypoint x="1100" y="700" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_x_level_t_gd_di" bpmnElement="Flow_x_level_t_gd">
        <di:waypoint x="970" y="405" />
        <di:waypoint x="1035" y="405" />
        <di:waypoint x="1035" y="820" />
        <di:waypoint x="1100" y="820" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_t_rbu_x_result_di" bpmnElement="Flow_t_rbu_x_result">
        <di:waypoint x="1200" y="580" />
        <di:waypoint x="1240" y="580" />
        <di:waypoint x="1240" y="685" />
        <di:waypoint x="1280" y="685" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_t_dp_x_result_di" bpmnElement="Flow_t_dp_x_result">
        <di:waypoint x="1200" y="700" />
        <di:waypoint x="1240" y="700" />
        <di:waypoint x="1240" y="685" />
        <di:waypoint x="1280" y="685" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_t_gd_x_result_di" bpmnElement="Flow_t_gd_x_result">
        <di:waypoint x="1200" y="820" />
        <di:waypoint x="1240" y="820" />
        <di:waypoint x="1240" y="685" />
        <di:waypoint x="1280" y="685" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_x_result_t_apply_di" bpmnElement="Flow_x_result_t_apply">
        <di:waypoint x="1330" y="685" />
        <di:waypoint x="1395" y="685" />
        <di:waypoint x="1395" y="300" />
        <di:waypoint x="1460" y="300" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_x_result_t_reject_di" bpmnElement="Flow_x_result_t_reject">
        <di:waypoint x="1330" y="685" />
        <di:waypoint x="1395" y="685" />
        <di:waypoint x="1395" y="420" />
        <di:waypoint x="1460" y="420" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_t_increase_t_apply_di" bpmnElement="Flow_t_increase_t_apply">
        <di:waypoint x="840" y="300" />
        <di:waypoint x="1460" y="300" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_t_npss_t_apply_di" bpmnElement="Flow_t_npss_t_apply">
        <di:waypoint x="1020" y="300" />
        <di:waypoint x="1460" y="300" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_t_apply_t_annul_di" bpmnElement="Flow_t_apply_t_annul">
        <di:waypoint x="1560" y="300" />
        <di:waypoint x="1640" y="300" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_t_annul_end_ok_di" bpmnElement="Flow_t_annul_end_ok">
        <di:waypoint x="1740" y="300" />
        <di:waypoint x="1780" y="300" />
        <di:waypoint x="1780" y="338" />
        <di:waypoint x="1820" y="338" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_t_reject_end_reject_di" bpmnElement="Flow_t_reject_end_reject">
        <di:waypoint x="1560" y="420" />
        <di:waypoint x="1600" y="420" />
        <di:waypoint x="1600" y="398" />
        <di:waypoint x="1640" y="398" />
      </bpmndi:BPMNEdge>
    </bpmndi:BPMNPlane>
  </bpmndi:BPMNDiagram>
</bpmn:definitions>