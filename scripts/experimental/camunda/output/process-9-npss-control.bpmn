<?xml version="1.0" encoding="UTF-8"?>
<bpmn:definitions xmlns:bpmn="http://www.omg.org/spec/BPMN/20100524/MODEL"
                  xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI"
                  xmlns:dc="http://www.omg.org/spec/DD/20100524/DC"
                  xmlns:di="http://www.omg.org/spec/DD/20100524/DI"
                  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
                  xmlns:zeebe="http://camunda.org/schema/zeebe/1.0"
                  id="Definitions_1"
                  targetNamespace="http://bpmn.io/schema/bpmn"
                  exporter="fm-review-system"
                  exporterVersion="1.0">
  <bpmn:error id="Error_end_block" name="Заблокировано" errorCode="END_BLOCK" />
  <bpmn:collaboration id="Collaboration_1">
    <bpmn:participant id="Participant_1" name="Контроль возраста НПСС" processRef="Process_kontrol_vozrasta_npss" />
  </bpmn:collaboration>
  <bpmn:process id="Process_kontrol_vozrasta_npss" name="Контроль возраста НПСС" isExecutable="true">
    <bpmn:laneSet id="LaneSet_1">
      <bpmn:lane id="Lane_system" name="1С:УТ">
        <bpmn:flowNodeRef>start</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>t1</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>x1</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>t_green</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>t_yellow</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>t_orange</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>t_red</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>end_ok</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>end_block</bpmn:flowNodeRef>
      </bpmn:lane>
      <bpmn:lane id="Lane_rbu" name="РБЮ">
        <bpmn:flowNodeRef>t_rbu_confirm</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>x_rbu</bpmn:flowNodeRef>
      </bpmn:lane>
      <bpmn:lane id="Lane_dp" name="ДП">
        <bpmn:flowNodeRef>t_dp_temp</bpmn:flowNodeRef>
      </bpmn:lane>
      <bpmn:lane id="Lane_finance" name="Финансовая служба">
        <bpmn:flowNodeRef>t_recalc</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>t_audit</bpmn:flowNodeRef>
      </bpmn:lane>
    </bpmn:laneSet>
    <bpmn:startEvent id="start" name="">
      <bpmn:outgoing>Flow_start_t1</bpmn:outgoing>
    </bpmn:startEvent>
    <bpmn:task id="t1" name="Проверка возраста НПСС при создании заказа">
      <bpmn:incoming>Flow_start_t1</bpmn:incoming>
      <bpmn:outgoing>Flow_t1_x1</bpmn:outgoing>
    </bpmn:task>
    <bpmn:exclusiveGateway id="x1" name="X" default="Flow_x1_t_red">
      <bpmn:incoming>Flow_t1_x1</bpmn:incoming>
      <bpmn:outgoing>Flow_x1_t_green</bpmn:outgoing>
      <bpmn:outgoing>Flow_x1_t_yellow</bpmn:outgoing>
      <bpmn:outgoing>Flow_x1_t_orange</bpmn:outgoing>
      <bpmn:outgoing>Flow_x1_t_red</bpmn:outgoing>
    </bpmn:exclusiveGateway>
    <bpmn:task id="t_green" name="0-30 дней (работа без ограничений)">
      <bpmn:incoming>Flow_x1_t_green</bpmn:incoming>
      <bpmn:outgoing>Flow_t_green_end_ok</bpmn:outgoing>
    </bpmn:task>
    <bpmn:task id="t_yellow" name="31-60 дней (предупреждение, работа разрешена)">
      <bpmn:incoming>Flow_x1_t_yellow</bpmn:incoming>
      <bpmn:outgoing>Flow_t_yellow_end_ok</bpmn:outgoing>
    </bpmn:task>
    <bpmn:task id="t_orange" name="61-90 дней (требуется подтверждение РБЮ)">
      <bpmn:incoming>Flow_x1_t_orange</bpmn:incoming>
      <bpmn:outgoing>Flow_t_orange_t_rbu_confirm</bpmn:outgoing>
    </bpmn:task>
    <bpmn:task id="t_rbu_confirm" name="Подтверждение актуальности или пересчет">
      <bpmn:incoming>Flow_t_orange_t_rbu_confirm</bpmn:incoming>
      <bpmn:outgoing>Flow_t_rbu_confirm_x_rbu</bpmn:outgoing>
    </bpmn:task>
    <bpmn:exclusiveGateway id="x_rbu" name="X" default="Flow_x_rbu_t_recalc">
      <bpmn:incoming>Flow_t_rbu_confirm_x_rbu</bpmn:incoming>
      <bpmn:outgoing>Flow_x_rbu_end_ok</bpmn:outgoing>
      <bpmn:outgoing>Flow_x_rbu_t_recalc</bpmn:outgoing>
    </bpmn:exclusiveGateway>
    <bpmn:task id="t_red" name="&gt; 90 дней БЛОКИРОВКА (обязательный пересчет)">
      <bpmn:incoming>Flow_x1_t_red</bpmn:incoming>
      <bpmn:outgoing>Flow_t_red_end_block</bpmn:outgoing>
    </bpmn:task>
    <bpmn:task id="t_dp_temp" name="Временное разрешение (80+ дней)">
      <bpmn:outgoing>Flow_t_dp_temp_end_ok</bpmn:outgoing>
    </bpmn:task>
    <bpmn:task id="t_recalc" name="Пересчет НПСС (ежемесячно до 10-го числа)">
      <bpmn:incoming>Flow_x_rbu_t_recalc</bpmn:incoming>
      <bpmn:outgoing>Flow_t_recalc_end_ok</bpmn:outgoing>
    </bpmn:task>
    <bpmn:task id="t_audit" name="Квартальный аудит (100 SKU, точность &lt; 5%)">
      <bpmn:outgoing>Flow_t_audit_end_ok</bpmn:outgoing>
    </bpmn:task>
    <bpmn:endEvent id="end_ok" name="Продолжение работы">
      <bpmn:incoming>Flow_t_green_end_ok</bpmn:incoming>
      <bpmn:incoming>Flow_t_yellow_end_ok</bpmn:incoming>
      <bpmn:incoming>Flow_x_rbu_end_ok</bpmn:incoming>
      <bpmn:incoming>Flow_t_dp_temp_end_ok</bpmn:incoming>
      <bpmn:incoming>Flow_t_recalc_end_ok</bpmn:incoming>
      <bpmn:incoming>Flow_t_audit_end_ok</bpmn:incoming>
    </bpmn:endEvent>
    <bpmn:endEvent id="end_block" name="Заблокировано">
      <bpmn:incoming>Flow_t_red_end_block</bpmn:incoming>
      <bpmn:errorEventDefinition id="ErrorDef_end_block" errorRef="Error_end_block" />
    </bpmn:endEvent>
    <bpmn:sequenceFlow id="Flow_start_t1" sourceRef="start" targetRef="t1" />
    <bpmn:sequenceFlow id="Flow_t1_x1" sourceRef="t1" targetRef="x1" />
    <bpmn:sequenceFlow id="Flow_x1_t_green" name="0-30 дн" sourceRef="x1" targetRef="t_green">
      <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">=condition = &quot;0-30 дн&quot;</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    <bpmn:sequenceFlow id="Flow_x1_t_yellow" name="31-60 дн" sourceRef="x1" targetRef="t_yellow">
      <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">=condition = &quot;31-60 дн&quot;</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    <bpmn:sequenceFlow id="Flow_x1_t_orange" name="61-90 дн" sourceRef="x1" targetRef="t_orange">
      <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">=condition = &quot;61-90 дн&quot;</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    <bpmn:sequenceFlow id="Flow_x1_t_red" name="&gt; 90 дн" sourceRef="x1" targetRef="t_red" />
    <bpmn:sequenceFlow id="Flow_t_green_end_ok" sourceRef="t_green" targetRef="end_ok" />
    <bpmn:sequenceFlow id="Flow_t_yellow_end_ok" sourceRef="t_yellow" targetRef="end_ok" />
    <bpmn:sequenceFlow id="Flow_t_orange_t_rbu_confirm" sourceRef="t_orange" targetRef="t_rbu_confirm" />
    <bpmn:sequenceFlow id="Flow_t_rbu_confirm_x_rbu" sourceRef="t_rbu_confirm" targetRef="x_rbu" />
    <bpmn:sequenceFlow id="Flow_x_rbu_end_ok" name="актуальна" sourceRef="x_rbu" targetRef="end_ok">
      <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">=condition = &quot;актуальна&quot;</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    <bpmn:sequenceFlow id="Flow_x_rbu_t_recalc" name="пересчет" sourceRef="x_rbu" targetRef="t_recalc" />
    <bpmn:sequenceFlow id="Flow_t_red_end_block" sourceRef="t_red" targetRef="end_block" />
    <bpmn:sequenceFlow id="Flow_t_dp_temp_end_ok" sourceRef="t_dp_temp" targetRef="end_ok" />
    <bpmn:sequenceFlow id="Flow_t_recalc_end_ok" sourceRef="t_recalc" targetRef="end_ok" />
    <bpmn:sequenceFlow id="Flow_t_audit_end_ok" sourceRef="t_audit" targetRef="end_ok" />
  </bpmn:process>
  <bpmndi:BPMNDiagram id="BPMNDiagram_1">
    <bpmndi:BPMNPlane id="BPMNPlane_1" bpmnElement="Collaboration_1">
      <bpmndi:BPMNShape id="Participant_1_di" bpmnElement="Participant_1" isHorizontal="true">
        <dc:Bounds x="100" y="60" width="1820" height="1000" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Lane_system_di" bpmnElement="Lane_system" isHorizontal="true">
        <dc:Bounds x="130" y="60" width="1790" height="520" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Lane_rbu_di" bpmnElement="Lane_rbu" isHorizontal="true">
        <dc:Bounds x="130" y="580" width="1790" height="160" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Lane_dp_di" bpmnElement="Lane_dp" isHorizontal="true">
        <dc:Bounds x="130" y="740" width="1790" height="160" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Lane_finance_di" bpmnElement="Lane_finance" isHorizontal="true">
        <dc:Bounds x="130" y="900" width="1790" height="160" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="start_di" bpmnElement="start">
        <dc:Bounds x="200" y="280" width="36" height="36" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="t1_di" bpmnElement="t1">
        <dc:Bounds x="380" y="280" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="x1_di" bpmnElement="x1">
        <dc:Bounds x="560" y="280" width="50" height="50" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="t_green_di" bpmnElement="t_green">
        <dc:Bounds x="740" y="100" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="t_yellow_di" bpmnElement="t_yellow">
        <dc:Bounds x="740" y="220" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="t_orange_di" bpmnElement="t_orange">
        <dc:Bounds x="740" y="340" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="t_rbu_confirm_di" bpmnElement="t_rbu_confirm">
        <dc:Bounds x="920" y="620" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="x_rbu_di" bpmnElement="x_rbu">
        <dc:Bounds x="1100" y="620" width="50" height="50" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="t_red_di" bpmnElement="t_red">
        <dc:Bounds x="740" y="460" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="t_dp_temp_di" bpmnElement="t_dp_temp">
        <dc:Bounds x="200" y="780" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="t_recalc_di" bpmnElement="t_recalc">
        <dc:Bounds x="1280" y="940" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="t_audit_di" bpmnElement="t_audit">
        <dc:Bounds x="200" y="940" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="end_ok_di" bpmnElement="end_ok">
        <dc:Bounds x="1460" y="280" width="36" height="36" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="end_block_di" bpmnElement="end_block">
        <dc:Bounds x="920" y="280" width="36" height="36" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="Flow_start_t1_di" bpmnElement="Flow_start_t1">
        <di:waypoint x="236" y="298" />
        <di:waypoint x="308" y="298" />
        <di:waypoint x="308" y="320" />
        <di:waypoint x="380" y="320" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_t1_x1_di" bpmnElement="Flow_t1_x1">
        <di:waypoint x="480" y="320" />
        <di:waypoint x="520" y="320" />
        <di:waypoint x="520" y="305" />
        <di:waypoint x="560" y="305" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_x1_t_green_di" bpmnElement="Flow_x1_t_green">
        <di:waypoint x="610" y="305" />
        <di:waypoint x="675" y="305" />
        <di:waypoint x="675" y="140" />
        <di:waypoint x="740" y="140" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_x1_t_yellow_di" bpmnElement="Flow_x1_t_yellow">
        <di:waypoint x="610" y="305" />
        <di:waypoint x="675" y="305" />
        <di:waypoint x="675" y="260" />
        <di:waypoint x="740" y="260" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_x1_t_orange_di" bpmnElement="Flow_x1_t_orange">
        <di:waypoint x="610" y="305" />
        <di:waypoint x="675" y="305" />
        <di:waypoint x="675" y="380" />
        <di:waypoint x="740" y="380" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_x1_t_red_di" bpmnElement="Flow_x1_t_red">
        <di:waypoint x="610" y="305" />
        <di:waypoint x="675" y="305" />
        <di:waypoint x="675" y="500" />
        <di:waypoint x="740" y="500" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_t_green_end_ok_di" bpmnElement="Flow_t_green_end_ok">
        <di:waypoint x="840" y="140" />
        <di:waypoint x="1150" y="140" />
        <di:waypoint x="1150" y="298" />
        <di:waypoint x="1460" y="298" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_t_yellow_end_ok_di" bpmnElement="Flow_t_yellow_end_ok">
        <di:waypoint x="840" y="260" />
        <di:waypoint x="1150" y="260" />
        <di:waypoint x="1150" y="298" />
        <di:waypoint x="1460" y="298" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_t_orange_t_rbu_confirm_di" bpmnElement="Flow_t_orange_t_rbu_confirm">
        <di:waypoint x="840" y="380" />
        <di:waypoint x="880" y="380" />
        <di:waypoint x="880" y="660" />
        <di:waypoint x="920" y="660" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_t_rbu_confirm_x_rbu_di" bpmnElement="Flow_t_rbu_confirm_x_rbu">
        <di:waypoint x="1020" y="660" />
        <di:waypoint x="1060" y="660" />
        <di:waypoint x="1060" y="645" />
        <di:waypoint x="1100" y="645" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_x_rbu_end_ok_di" bpmnElement="Flow_x_rbu_end_ok">
        <di:waypoint x="1150" y="645" />
        <di:waypoint x="1305" y="645" />
        <di:waypoint x="1305" y="298" />
        <di:waypoint x="1460" y="298" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_x_rbu_t_recalc_di" bpmnElement="Flow_x_rbu_t_recalc">
        <di:waypoint x="1150" y="645" />
        <di:waypoint x="1215" y="645" />
        <di:waypoint x="1215" y="980" />
        <di:waypoint x="1280" y="980" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_t_red_end_block_di" bpmnElement="Flow_t_red_end_block">
        <di:waypoint x="840" y="500" />
        <di:waypoint x="880" y="500" />
        <di:waypoint x="880" y="298" />
        <di:waypoint x="920" y="298" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_t_dp_temp_end_ok_di" bpmnElement="Flow_t_dp_temp_end_ok">
        <di:waypoint x="300" y="820" />
        <di:waypoint x="880" y="820" />
        <di:waypoint x="880" y="298" />
        <di:waypoint x="1460" y="298" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_t_recalc_end_ok_di" bpmnElement="Flow_t_recalc_end_ok">
        <di:waypoint x="1380" y="980" />
        <di:waypoint x="1420" y="980" />
        <di:waypoint x="1420" y="298" />
        <di:waypoint x="1460" y="298" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_t_audit_end_ok_di" bpmnElement="Flow_t_audit_end_ok">
        <di:waypoint x="300" y="980" />
        <di:waypoint x="880" y="980" />
        <di:waypoint x="880" y="298" />
        <di:waypoint x="1460" y="298" />
      </bpmndi:BPMNEdge>
    </bpmndi:BPMNPlane>
  </bpmndi:BPMNDiagram>
</bpmn:definitions>