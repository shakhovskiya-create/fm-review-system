<?xml version="1.0" encoding="UTF-8"?>
<bpmn:definitions xmlns:bpmn="http://www.omg.org/spec/BPMN/20100524/MODEL" xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI" xmlns:dc="http://www.omg.org/spec/DD/20100524/DC" xmlns:di="http://www.omg.org/spec/DD/20100524/DI" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:zeebe="http://camunda.org/schema/zeebe/1.0" id="Definitions_1" targetNamespace="http://bpmn.io/schema/bpmn" exporter="fm-review-system" exporterVersion="2.0">
  <bpmn:error id="Error_end_block" name="Заблокировано" errorCode="END_BLOCK" />
  <bpmn:process id="Process_kontrol_vozrasta_npss" name="Контроль возраста НПСС" isExecutable="true">
    <bpmn:laneSet id="LaneSet_1">
      <bpmn:lane id="Lane_system" name="1С:УТ">
        <bpmn:flowNodeRef>start</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>t1</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>x1</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>t_green</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>t_yellow</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>t_orange</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>t_red</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>end_ok</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>end_block</bpmn:flowNodeRef>
      </bpmn:lane>
      <bpmn:lane id="Lane_rbu" name="РБЮ">
        <bpmn:flowNodeRef>t_rbu_confirm</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>x_rbu</bpmn:flowNodeRef>
      </bpmn:lane>
      <bpmn:lane id="Lane_dp" name="ДП" />
      <bpmn:lane id="Lane_finance" name="Финансовая служба">
        <bpmn:flowNodeRef>t_recalc</bpmn:flowNodeRef>
      </bpmn:lane>
    </bpmn:laneSet>
    <bpmn:startEvent id="start" name="">
      <bpmn:outgoing>Flow_start_t1</bpmn:outgoing>
    </bpmn:startEvent>
    <bpmn:task id="t1" name="Проверка возраста НПСС при создании заказа">
      <bpmn:incoming>Flow_start_t1</bpmn:incoming>
      <bpmn:outgoing>Flow_t1_x1</bpmn:outgoing>
    </bpmn:task>
    <bpmn:exclusiveGateway id="x1" name="X" default="Flow_x1_t_red">
      <bpmn:incoming>Flow_t1_x1</bpmn:incoming>
      <bpmn:outgoing>Flow_x1_t_green</bpmn:outgoing>
      <bpmn:outgoing>Flow_x1_t_yellow</bpmn:outgoing>
      <bpmn:outgoing>Flow_x1_t_orange</bpmn:outgoing>
      <bpmn:outgoing>Flow_x1_t_red</bpmn:outgoing>
    </bpmn:exclusiveGateway>
    <bpmn:task id="t_green" name="0-30 дней (работа без ограничений)">
      <bpmn:incoming>Flow_x1_t_green</bpmn:incoming>
      <bpmn:outgoing>Flow_t_green_end_ok</bpmn:outgoing>
    </bpmn:task>
    <bpmn:task id="t_yellow" name="31-60 дней (предупреждение, работа разрешена)">
      <bpmn:incoming>Flow_x1_t_yellow</bpmn:incoming>
      <bpmn:outgoing>Flow_t_yellow_end_ok</bpmn:outgoing>
    </bpmn:task>
    <bpmn:task id="t_orange" name="61-90 дней (требуется подтверждение РБЮ)">
      <bpmn:incoming>Flow_x1_t_orange</bpmn:incoming>
      <bpmn:outgoing>Flow_t_orange_t_rbu_confirm</bpmn:outgoing>
    </bpmn:task>
    <bpmn:task id="t_rbu_confirm" name="Подтверждение актуальности или пересчет">
      <bpmn:incoming>Flow_t_orange_t_rbu_confirm</bpmn:incoming>
      <bpmn:outgoing>Flow_t_rbu_confirm_x_rbu</bpmn:outgoing>
    </bpmn:task>
    <bpmn:exclusiveGateway id="x_rbu" name="X" default="Flow_x_rbu_t_recalc">
      <bpmn:incoming>Flow_t_rbu_confirm_x_rbu</bpmn:incoming>
      <bpmn:outgoing>Flow_x_rbu_end_ok</bpmn:outgoing>
      <bpmn:outgoing>Flow_x_rbu_t_recalc</bpmn:outgoing>
    </bpmn:exclusiveGateway>
    <bpmn:task id="t_red" name="&#62; 90 дней БЛОКИРОВКА (обязательный пересчет)">
      <bpmn:incoming>Flow_x1_t_red</bpmn:incoming>
      <bpmn:outgoing>Flow_t_red_end_block</bpmn:outgoing>
    </bpmn:task>
    <bpmn:task id="t_recalc" name="Пересчет НПСС (ежемесячно до 10-го числа)">
      <bpmn:incoming>Flow_x_rbu_t_recalc</bpmn:incoming>
      <bpmn:outgoing>Flow_t_recalc_end_ok</bpmn:outgoing>
    </bpmn:task>
    <bpmn:endEvent id="end_ok" name="Продолжение работы">
      <bpmn:incoming>Flow_t_green_end_ok</bpmn:incoming>
      <bpmn:incoming>Flow_t_yellow_end_ok</bpmn:incoming>
      <bpmn:incoming>Flow_x_rbu_end_ok</bpmn:incoming>
      <bpmn:incoming>Flow_t_recalc_end_ok</bpmn:incoming>
    </bpmn:endEvent>
    <bpmn:endEvent id="end_block" name="Заблокировано">
      <bpmn:incoming>Flow_t_red_end_block</bpmn:incoming>
      <bpmn:errorEventDefinition id="ErrorDef_end_block" errorRef="Error_end_block" />
    </bpmn:endEvent>
    <bpmn:sequenceFlow id="Flow_start_t1" sourceRef="start" targetRef="t1" />
    <bpmn:sequenceFlow id="Flow_t1_x1" sourceRef="t1" targetRef="x1" />
    <bpmn:sequenceFlow id="Flow_x1_t_green" name="0-30 дн" sourceRef="x1" targetRef="t_green">
      <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">=condition = "0-30 дн"</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    <bpmn:sequenceFlow id="Flow_x1_t_yellow" name="31-60 дн" sourceRef="x1" targetRef="t_yellow">
      <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">=condition = "31-60 дн"</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    <bpmn:sequenceFlow id="Flow_x1_t_orange" name="61-90 дн" sourceRef="x1" targetRef="t_orange">
      <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">=condition = "61-90 дн"</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    <bpmn:sequenceFlow id="Flow_x1_t_red" name="&#62; 90 дн" sourceRef="x1" targetRef="t_red" />
    <bpmn:sequenceFlow id="Flow_t_green_end_ok" sourceRef="t_green" targetRef="end_ok" />
    <bpmn:sequenceFlow id="Flow_t_yellow_end_ok" sourceRef="t_yellow" targetRef="end_ok" />
    <bpmn:sequenceFlow id="Flow_t_orange_t_rbu_confirm" sourceRef="t_orange" targetRef="t_rbu_confirm" />
    <bpmn:sequenceFlow id="Flow_t_rbu_confirm_x_rbu" sourceRef="t_rbu_confirm" targetRef="x_rbu" />
    <bpmn:sequenceFlow id="Flow_x_rbu_end_ok" name="актуальна" sourceRef="x_rbu" targetRef="end_ok">
      <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">=condition = "актуальна"</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    <bpmn:sequenceFlow id="Flow_x_rbu_t_recalc" name="пересчет" sourceRef="x_rbu" targetRef="t_recalc" />
    <bpmn:sequenceFlow id="Flow_t_red_end_block" sourceRef="t_red" targetRef="end_block" />
    <bpmn:sequenceFlow id="Flow_t_recalc_end_ok" sourceRef="t_recalc" targetRef="end_ok" />
  </bpmn:process>
  <bpmndi:BPMNDiagram id="BPMNDiagram_Process_kontrol_vozrasta_npss">
    <bpmndi:BPMNPlane id="BPMNPlane_Process_kontrol_vozrasta_npss" bpmnElement="Process_kontrol_vozrasta_npss">
      <bpmndi:BPMNShape id="start_di" bpmnElement="start">
        <dc:Bounds x="57" y="52" width="36" height="36" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="t1_di" bpmnElement="t1">
        <dc:Bounds x="175" y="30" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="x1_di" bpmnElement="x1" isMarkerVisible="true">
        <dc:Bounds x="350" y="45" width="50" height="50" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="t_green_di" bpmnElement="t_green">
        <dc:Bounds x="475" y="30" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="end_ok_di" bpmnElement="end_ok">
        <dc:Bounds x="1107" y="52" width="36" height="36" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="t_yellow_di" bpmnElement="t_yellow">
        <dc:Bounds x="475" y="170" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="t_orange_di" bpmnElement="t_orange">
        <dc:Bounds x="475" y="310" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="t_rbu_confirm_di" bpmnElement="t_rbu_confirm">
        <dc:Bounds x="625" y="310" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="x_rbu_di" bpmnElement="x_rbu" isMarkerVisible="true">
        <dc:Bounds x="800" y="325" width="50" height="50" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="t_recalc_di" bpmnElement="t_recalc">
        <dc:Bounds x="925" y="310" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="t_red_di" bpmnElement="t_red">
        <dc:Bounds x="475" y="450" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="end_block_di" bpmnElement="end_block">
        <dc:Bounds x="657" y="472" width="36" height="36" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="Flow_start_t1_di" bpmnElement="Flow_start_t1">
        <di:waypoint x="93" y="70" />
        <di:waypoint x="175" y="70" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_t1_x1_di" bpmnElement="Flow_t1_x1">
        <di:waypoint x="275" y="70" />
        <di:waypoint x="350" y="70" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_x1_t_green_di" bpmnElement="Flow_x1_t_green">
        <di:waypoint x="400" y="70" />
        <di:waypoint x="475" y="70" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_x1_t_yellow_di" bpmnElement="Flow_x1_t_yellow">
        <di:waypoint x="375" y="95" />
        <di:waypoint x="375" y="210" />
        <di:waypoint x="475" y="210" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_x1_t_orange_di" bpmnElement="Flow_x1_t_orange">
        <di:waypoint x="375" y="95" />
        <di:waypoint x="375" y="350" />
        <di:waypoint x="475" y="350" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_x1_t_red_di" bpmnElement="Flow_x1_t_red">
        <di:waypoint x="375" y="95" />
        <di:waypoint x="375" y="490" />
        <di:waypoint x="475" y="490" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_t_green_end_ok_di" bpmnElement="Flow_t_green_end_ok">
        <di:waypoint x="575" y="70" />
        <di:waypoint x="1107" y="70" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_t_yellow_end_ok_di" bpmnElement="Flow_t_yellow_end_ok">
        <di:waypoint x="575" y="210" />
        <di:waypoint x="1125" y="210" />
        <di:waypoint x="1125" y="88" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_t_orange_t_rbu_confirm_di" bpmnElement="Flow_t_orange_t_rbu_confirm">
        <di:waypoint x="575" y="350" />
        <di:waypoint x="625" y="350" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_t_rbu_confirm_x_rbu_di" bpmnElement="Flow_t_rbu_confirm_x_rbu">
        <di:waypoint x="725" y="350" />
        <di:waypoint x="800" y="350" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_x_rbu_end_ok_di" bpmnElement="Flow_x_rbu_end_ok">
        <di:waypoint x="850" y="350" />
        <di:waypoint x="900" y="350" />
        <di:waypoint x="900" y="140" />
        <di:waypoint x="1050" y="140" />
        <di:waypoint x="1050" y="70" />
        <di:waypoint x="1107" y="70" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_x_rbu_t_recalc_di" bpmnElement="Flow_x_rbu_t_recalc">
        <di:waypoint x="850" y="350" />
        <di:waypoint x="925" y="350" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_t_recalc_end_ok_di" bpmnElement="Flow_t_recalc_end_ok">
        <di:waypoint x="1025" y="350" />
        <di:waypoint x="1125" y="350" />
        <di:waypoint x="1125" y="88" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_t_red_end_block_di" bpmnElement="Flow_t_red_end_block">
        <di:waypoint x="575" y="490" />
        <di:waypoint x="657" y="490" />
      </bpmndi:BPMNEdge>
    </bpmndi:BPMNPlane>
  </bpmndi:BPMNDiagram>
</bpmn:definitions>
