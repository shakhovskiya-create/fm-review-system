# Обязательное правило: Smoke-тесты перед сдачей

**НЕ сдавать результат без smoke-тестов.** Это абсолютное требование.

## Когда

После ЛЮБЫХ изменений в инфраструктуре (скрипты, хуки, конфиги, зависимости) — перед тем как сообщить пользователю "готово".

## Что проверять

1. **Изменённые скрипты** — запустить с реальными параметрами, проверить exit code
2. **pytest** — полный прогон `pytest tests/ -x -q`, 0 failures
3. **load-secrets.sh** — секреты загружаются из Infisical (не .env fallback)
4. **check-secrets.sh --verbose** — все ключи на месте

## Как

- Реальный запуск, не "должно работать"
- Проверить exit code: `echo $?`
- Для скриптов с побочными эффектами: `--dry-run`, `--help`, или безопасные параметры
- При ошибке — исправить и повторить, не сдавать с падающими тестами

## Минимальный чеклист

```
[ ] Изменённые скрипты запущены, exit 0
[ ] pytest — 0 failures
[ ] Секреты — из Infisical
```
