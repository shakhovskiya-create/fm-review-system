# PROJECT_SHPMNT_PROFIT - Контроль рентабельности отгрузок по ЛС

> **ФМ:** FM-LS-PROFIT
> **Версия:** 1.0.1
> **Статус:** Готов к разработке
> **Confluence:** Единственный источник ФМ (REST API, PAGE_ID)

---

## Описание

Функциональная модель контроля рентабельности при отгрузках по локальным сметам (ЛС).

**Цель:** Защита от cherry-picking - выборочного выкупа низкомаржинальных позиций.

**Конфигурация:** 1С:УТ + 1С:ДО + WMS

---

## Структура проекта

```
PROJECT_SHPMNT_PROFIT/
├── README.md                    ← Этот файл
├── CONFLUENCE_PAGE_ID           ← ID страницы ФМ в Confluence
│
├── CHANGES/                     ← Списки изменений
│   └── FM-*-CHANGES.md          ← Что менялось в каждой версии
│
├── AGENT_1_ARCHITECT/           ← Результаты аудита
│   └── audit-reports/           ← Отчеты аудита
│
├── AGENT_2_ROLE_SIMULATOR/      ← Симуляции ролей
│   ├── README.md                ← Описание
│   └── UX-FINDINGS-v*.md        ← Находки по UX
│
├── AGENT_3_DEFENDER/            ← Результаты защиты
│   └── review-responses/        ← Ответы на замечания
│
├── AGENT_4_QA_TESTER/           ← Результаты тестирования
│   └── test-cases/              ← Тест-кейсы
│
├── AGENT_5_TECH_ARCHITECT/      ← Техническая архитектура
│   └── tz/                      ← Технические задания
│
├── REPORTS/                     ← Итоговые отчеты
│   └── summary-v*.md            ← Сводные отчеты по версиям
│
└── FM_DOCUMENTS/                ← АРХИВ (legacy, только для истории)
    └── *.docx                   ← Старые версии до перехода на Confluence
```

---

## Текущая версия ФМ

| Поле | Значение |
|------|----------|
| **Название** | Контроль рентабельности отгрузок по ЛС |
| **Версия** | 1.0.1 |
| **Источник** | Confluence (REST API, PAGE_ID 83951683) |
| **Дата** | 09.02.2026 |
| **Готовность** | 100% |

---

## История

| Версия | Дата | Описание |
|--------|------|----------|
| **1.0.1** | 09.02.2026 | Аудит v1.0.0: 12 правок (1 CRIT, 3 HIGH, 5 MED, 3 LOW). Confluence v27. |
| **1.0** | 28.01.2026 | Первая стабильная версия. Включает все исправления из аудита. |
| *(Archive)* | | Старые версии v2.5.1-v2.5.5 в FM_DOCUMENTS/ (legacy) |

---

## История аудитов

| Сессия | Агент | Задача | Результат |
|--------|-------|--------|-----------|
| 1 | ARCHITECT | Полный аудит v2.5.1 | 17 правок → v2.5.2 |
| 2 | ARCHITECT | Повторный аудит v2.5.2 | 6 правок → v2.5.3 |
| 4 | ROLE_SIMULATOR | Симуляция менеджера | 4 проблемы UX |
| 5 | DEFENDER | Защита v2.5.3 | 2.5 принято / 2 отклонено |
| 6 | DEFENDER | /apply v2.5.4 | 3 UX-улучшения добавлены |
| 7 | ARCHITECT | Финальный аудит v2.5.4 | 19 правок → v2.5.5 |
| 8 | - | Рефакторинг | v1.0 (новое имя, формат) |
| 9 | ARCHITECT | Полный аудит v1.0.0 | 12 правок → v1.0.1 |

---

## Как работать с проектом

### Аудит ФМ (Агент 1)
```
1. Читать ФМ из Confluence (REST API, PAGE_ID)
2. Результаты аудита → AGENT_1_ARCHITECT/
3. Правки вносить через Agent 7 → Confluence
```

### Симуляция ролей (Агент 2)
```
1. Читать ФМ из Confluence (REST API, PAGE_ID)
2. Результаты симуляции → AGENT_2_ROLE_SIMULATOR/
```

### Защита ФМ (Агент 3)
```
1. Читать замечания из AGENT_1_ARCHITECT/, AGENT_2_ROLE_SIMULATOR/
2. Ответы → AGENT_3_DEFENDER/
```

### Тестирование (Агент 4)
```
1. Читать ФМ из Confluence (REST API, PAGE_ID)
2. Тест-кейсы → AGENT_4_QA_TESTER/
```

### Техническая архитектура (Агент 5)
```
1. Читать ФМ из Confluence (REST API, PAGE_ID)
2. ТЗ → AGENT_5_TECH_ARCHITECT/
```

> **ВАЖНО:** FM_DOCUMENTS/ содержит только исторические DOCX-файлы.
> Актуальная ФМ всегда читается из Confluence.
